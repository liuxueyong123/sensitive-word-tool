# sensitive-word-tool

![npm](https://img.shields.io/npm/v/sensitive-word-tool)
![npm](https://img.shields.io/npm/dm/sensitive-word-tool)
![npm bundle size](https://img.shields.io/bundlephobia/minzip/sensitive-word-tool)
![NPM](https://img.shields.io/npm/l/sensitive-word-tool)

åŸºäº DFA ç®—æ³•å®ç°ï¼Œæ”¯æŒè¿‡æ»¤æ‰å¹²æ‰°è¯çš„åŸºç¡€ä¸Šå¤„ç†æ•æ„Ÿè¯ï¼Œéå¸¸è½»å·§å®Œå¤‡çš„ JavaScript æ•æ„Ÿè¯å¤„ç†åº“ğŸš€ğŸš€ğŸš€

## è¯´æ˜

æœ¬åº“æ˜¯ä¸€ä¸ªå¤„ç†æ•æ„Ÿè¯çš„å·¥å…·åº“ï¼Œæ‰€ä»¥ä¸ä¼šæä¾›é»˜è®¤çš„æ•æ„Ÿè¯ã€‚å¦‚æœéœ€è¦çš„è¯å¯ä»¥[å‚è€ƒè¿™é‡Œ](https://github.com/fwwdn/sensitive-stop-words)ã€‚

## æ€§èƒ½

ä»¥ä¸‹æµ‹è¯•å‡åœ¨æœ¬åœ°è¿›è¡Œï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒå°†ä¼šæ›´å¿«ä¸€äº›ã€‚

æµ‹è¯•å­—ç¬¦ä¸²ä¸ºéšæœºç”Ÿæˆçš„æ±‰å­—ã€å­—æ¯ã€æ•°å­—ã€‚ åœ¨ 20000 ä¸ªéšæœºæ•æ„Ÿè¯æ„å»ºçš„æ ‘ä¸‹è¿›è¡Œæµ‹è¯•ï¼Œæ¯ç»„æµ‹è¯• 5 æ¬¡å–å¹³å‡å€¼ã€‚

| å­—ç¬¦ä¸²é•¿åº¦    | å®ä¾‹åŒ–æ—¶é—´  |  `verify`   | `match`     |  `filter`  |
| ----------- |----------- | ----------- | ----------- | -----------|
| 1000        |   < 65ms   |  < 0.7ms    |  < 1.25ms   |  < 1.35ms  |
| 5000        |   < 65ms   |  < 0.75ms   |  < 10ms     |  < 9.5ms   |
| 10000       |   < 65ms   |  < 1.5ms    |  < 13.5ms   |  < 15ms    |
| 20000       |   < 65ms   |  < 1.5ms    |  < 22ms     |  < 24ms    |

## å®‰è£…

- ä½¿ç”¨ npm

```sh
npm install sensitive-word-tool
```

- ä½¿ç”¨ yarn

```sh
yarn add sensitive-word-tool
```

- ä½¿ç”¨ pnpm

```sh
pnpm add sensitive-word-tool
```

## ä½¿ç”¨

### å¯¼å…¥åŒ…

- CommonJS å¯¼å…¥

```js
const { SensitiveWordTool } = require('sensitive-word-tool')
```

- ESModule å¯¼å…¥

```js
import SensitiveWordTool from 'sensitive-word-tool'
```

### è¿›è¡Œæ•æ„Ÿè¯æ£€æµ‹

- åŸºç¡€ç”¨æ³•

```ts
import SensitiveWordTool from 'sensitive-word-tool'

const sensitiveWordTool = new SensitiveWordTool()
sensitiveWordTool.addWords(['ç‹å…«è›‹', 'ç‹å…«ç¾”å­', 'æµ‹è¯•', 'æ±Ÿå—çš®é©å‚'])

// ã€Šã€‹()å±äºå¹²æ‰°è¯ï¼Œä¼šå¤„ç†æ‰åå†å¯¹æ•æ„Ÿè¯è¿›è¡Œå¤„ç†
sensitiveWordTool.match('æµ™æ±Ÿæ¸©å·ï¼Œæ±Ÿå—ã€Šçš®é©å‚ã€‹è€æ¿ç‹(å…«)è›‹ï¼Œå¸¦ç€å°å§¨å­è·‘äº†') // ['æ±Ÿå—çš®é©å‚', 'ç‹å…«è›‹']
sensitiveWordTool.verify('æµ™æ±Ÿæ¸©å·ï¼Œæ±Ÿå—ã€Šçš®é©å‚ã€‹è€æ¿ç‹(å…«)è›‹ï¼Œå¸¦ç€å°å§¨å­è·‘äº†') // true
sensitiveWordTool.filter('æµ™æ±Ÿæ¸©å·ï¼Œæ±Ÿå—ã€Šçš®é©å‚ã€‹è€æ¿ç‹(å…«)è›‹ï¼Œå¸¦ç€å°å§¨å­è·‘äº†') // æµ™æ±Ÿæ¸©å·ï¼Œ**(***)è€æ¿*(*)*ï¼Œå¸¦ç€å°å§¨å­è·‘äº†

sensitiveWordTool.match('çš®é©å‚è€æ¿å¸¦ç€å°å§¨å­è·‘äº†') // []
sensitiveWordTool.verify('çš®é©å‚è€æ¿å¸¦ç€å°å§¨å­è·‘äº†') // false
sensitiveWordTool.filter('çš®é©å‚è€æ¿å¸¦ç€å°å§¨å­è·‘äº†') // çš®é©å‚è€æ¿å¸¦ç€å°å§¨å­è·‘äº†
```

- è¿›é˜¶ç”¨æ³•

```ts
// åˆå§‹åŒ–æ—¶è®¾ç½®æ•æ„Ÿè¯
const sensitiveWordTool = new SensitiveWordTool({ wordList: ['ç‹å…«è›‹', 'ç‹å…«ç¾”å­', 'æµ‹è¯•', 'æ±Ÿå—çš®é©å‚'] })

// æ”¯æŒç»§ç»­å¢åŠ æ•æ„Ÿè¯
sensitiveWordTool.addWords(['å°å§¨å­'])
sensitiveWordTool.match('æ±Ÿå—çš®é©å‚è€æ¿å¸¦ç€å°å§¨å­è·‘äº†')  // ['æ±Ÿå—çš®é©å‚', 'å°å§¨å­']


// æ”¯æŒæ¸…ç©ºå½“å‰çš„æ•æ„Ÿè¯
sensitiveWordTool.clearWords()
sensitiveWordTool.addWords(['æ±Ÿå—çš®é©å‚'])
sensitiveWordTool.match('æ±Ÿå—çš®é©å‚è€æ¿å¸¦ç€å°å§¨å­è·‘äº†')  // ['æ±Ÿå—çš®é©å‚']


// æ”¯æŒä¸»åŠ¨è®¾ç½®å¹²æ‰°è¯ï¼ˆä¸è®¾ç½®å°†ä½¿ç”¨é»˜è®¤å¹²æ‰°è¯ï¼‰ï¼Œæ•æ„Ÿè¯æ£€æµ‹æ—¶ä¼šå°†æ–‡æœ¬ä¸­çš„å¹²æ‰°è¯åˆ é™¤å†åŒ¹é…
sensitiveWordTool.setNoiseWords(' $')
sensitiveWordTool.match('æµ™æ±Ÿæ¸©å·ï¼Œæ±Ÿå— çš®é©$å‚è€æ¿ç‹$å…«&è›‹ï¼Œå¸¦ç€å°å§¨å­è·‘äº†')  // ['æ±Ÿå—çš®é©å‚']
```

## API

### `æ„é€ å‡½æ•°`

##### ç¤ºä¾‹

```ts
const sensitiveWordTool = new SensitiveWordTool({
  wordList: ['ç‹å…«è›‹', 'ç‹å…«ç¾”å­', 'æµ‹è¯•', 'æ±Ÿå—çš®é©å‚'],
  noiseWords: ' $'
})
```

##### å‚æ•°

- `wordList`: å¯é€‰ã€‚ç”¨äºè®¾ç½®åˆå§‹çš„æ•æ„Ÿè¯ã€‚é»˜è®¤å€¼ï¼š`[]`
- `noiseWords`: å¯é€‰ã€‚ç”¨äºè®¾ç½®å¹²æ‰°è¯ï¼Œæ•æ„Ÿè¯æ£€æµ‹æ—¶ä¼šå°†å¾…æ£€æµ‹æ–‡æœ¬ä¸­çš„å¹²æ‰°è¯åˆ é™¤åå†åŒ¹é…ã€‚é»˜è®¤å€¼ï¼š

```
 \t\r\n~!@#$%^&*()_+-=ã€ã€‘ã€{}|;\':"ï¼Œã€‚ã€ã€Šã€‹ï¼ŸÎ±Î²Î³Î´ÎµÎ¶Î·Î¸Î¹ÎºÎ»Î¼Î½Î¾Î¿Ï€ÏÏƒÏ„Ï…Ï†Ï‡ÏˆÏ‰Î‘Î’Î“Î”Î•Î–Î—Î˜Î™ÎšÎ›ÎœÎÎÎŸÎ Î¡Î£Î¤Î¥Î¦Î§Î¨Î©ã€‚ï¼Œã€ï¼›ï¼šï¼Ÿï¼â€¦â€”Â·Ë‰Â¨â€˜â€™â€œâ€ã€…ï½â€–âˆ¶ï¼‚ï¼‡ï½€ï½œã€ƒã€”ã€•ã€ˆã€‰ã€Šã€‹ã€Œã€ã€ã€ï¼ã€–ã€—ã€ã€‘ï¼ˆï¼‰ï¼»ï¼½ï½›ï½â… â…¡â…¢â…£â…¤â…¥â…¦â…§â…¨â…©â…ªâ…«â’ˆâ’‰â’Šâ’‹â’Œâ’â’â’â’â’‘â’’â’“â’”â’•â’–â’—â’˜â’™â’šâ’›ãˆ ãˆ¡ãˆ¢ãˆ£ãˆ¤ãˆ¥ãˆ¦ãˆ§ãˆ¨ãˆ©â‘ â‘¡â‘¢â‘£â‘¤â‘¥â‘¦â‘§â‘¨â‘©â‘´â‘µâ‘¶â‘·â‘¸â‘¹â‘ºâ‘»â‘¼â‘½â‘¾â‘¿â’€â’â’‚â’ƒâ’„â’…â’†â’‡â‰ˆâ‰¡â‰ ï¼â‰¤â‰¥ï¼œï¼â‰®â‰¯âˆ·Â±ï¼‹ï¼Ã—Ã·ï¼âˆ«âˆ®âˆâˆâˆ§âˆ¨âˆ‘âˆâˆªâˆ©âˆˆâˆµâˆ´âŠ¥âˆ¥âˆ âŒ’âŠ™â‰Œâˆ½âˆšÂ§â„–â˜†â˜…â—‹â—â—â—‡â—†â–¡â„ƒâ€°â‚¬â– â–³â–²â€»â†’â†â†‘â†“ã€“Â¤Â°ï¼ƒï¼†ï¼ ï¼¼ï¸¿ï¼¿ï¿£â€•â™‚â™€â”Œâ”â”â”â”‘â”’â”“â”€â”„â”ˆâ”œâ”â”â”Ÿâ” â”¡â”¢â”£â”‚â”†â”Šâ”¬â”­â”®â”¯â”°â”±â”²â”³â”¼â”½â”¾â”¿â•€â•â•‚â•ƒâ””â”•â”–â”—â”˜â”™â”šâ”›â”â”…â”‰â”¤â”¥â”¦â”§â”¨â”©â”ªâ”«â”ƒâ”‡â”‹â”´â”µâ”¶â”·â”¸â”¹â”ºâ”»â•‹â•Šâ•‰â•ˆâ•‡â•†â•…â•„
```

### `.setNoiseWords`

è®¾ç½®å¹²æ‰°è¯ã€‚æ•æ„Ÿè¯æ£€æµ‹æ—¶ä¼šå°†å¾…æ£€æµ‹æ–‡æœ¬ä¸­çš„å¹²æ‰°è¯è¿‡æ»¤æ‰å†åŒ¹é…ã€‚

##### ç¤ºä¾‹

```ts
const sensitiveWordTool = new SensitiveWordTool()
sensitiveWordTool.setNoiseWords(' $')
```

### `.clearWords`

æ¸…ç©ºå½“å‰è®¾ç½®çš„æ‰€æœ‰æ•æ„Ÿè¯ã€‚

##### ç¤ºä¾‹

```ts
const sensitiveWordTool = new SensitiveWordTool()
sensitiveWordTool.clearWords()
```

### `.addWords`

ç»§ç»­å¢åŠ æ•æ„Ÿè¯ã€‚

##### ç¤ºä¾‹

```ts
const sensitiveWordTool = new SensitiveWordTool()
sensitiveWordTool.addWords(['ç‹å…«è›‹', 'ç‹å…«ç¾”å­', 'æµ‹è¯•', 'æ±Ÿå—çš®é©å‚'])
```

### `.match`

ä»æ–‡æœ¬ä¸­åŒ¹é…å‡ºæ‰€æœ‰å‡ºç°è¿‡çš„æ•æ„Ÿè¯ã€‚è¿”å›åŒ¹é…åˆ°çš„æ•æ„Ÿè¯æ•°ç»„ï¼Œå¦‚æœªåŒ¹é…åˆ™è¿”å›ç©ºæ•°ç»„ã€‚

##### ç¤ºä¾‹

```ts
const sensitiveWordTool = new SensitiveWordTool()
sensitiveWordTool.addWords(['ç‹å…«è›‹', 'ç‹å…«ç¾”å­', 'æµ‹è¯•', 'æ±Ÿå—çš®é©å‚'])
sensitiveWordTool.match('æµ™æ±Ÿæ¸©å·ï¼Œæ±Ÿå—ã€Šçš®é©å‚ã€‹è€æ¿ç‹(å…«)è›‹ï¼Œå¸¦ç€å°å§¨å­è·‘äº†') // ['æ±Ÿå—çš®é©å‚', 'ç‹å…«è›‹']
```

### `.verify`

æ£€æµ‹æ–‡æœ¬ä¸­æ˜¯å¦å‡ºç°äº†æ•æ„Ÿè¯ã€‚è¿”å› `true` or `false`

##### ç¤ºä¾‹

```ts
const sensitiveWordTool = new SensitiveWordTool()
sensitiveWordTool.addWords(['ç‹å…«è›‹', 'ç‹å…«ç¾”å­', 'æµ‹è¯•', 'æ±Ÿå—çš®é©å‚'])
sensitiveWordTool.verify('æµ™æ±Ÿæ¸©å·ï¼Œæ±Ÿå—ã€Šçš®é©å‚ã€‹è€æ¿ç‹(å…«)è›‹ï¼Œå¸¦ç€å°å§¨å­è·‘äº†') // true
```

### `.filter`

æ›¿æ¢æ‰æ–‡æœ¬ä¸­å‡ºç°çš„æ•æ„Ÿè¯ã€‚

##### ç¤ºä¾‹

```ts
const sensitiveWordTool = new SensitiveWordTool()
sensitiveWordTool.addWords(['ç‹å…«è›‹', 'ç‹å…«ç¾”å­', 'æµ‹è¯•', 'æ±Ÿå—çš®é©å‚'])
sensitiveWordTool.filter('æµ™æ±Ÿæ¸©å·ï¼Œæ±Ÿå—ã€Šçš®é©å‚ã€‹è€æ¿ç‹(å…«)è›‹ï¼Œå¸¦ç€å°å§¨å­è·‘äº†', '*') // æµ™æ±Ÿæ¸©å·ï¼Œ**ã€Š***ã€‹è€æ¿*(*)*ï¼Œå¸¦ç€å°å§¨å­è·‘äº†
```

##### å‚æ•°

```ts
sensitiveWordTool.filter(content)
sensitiveWordTool.filter(content, filterChar)
```

- `content`: å¾…åŒ¹é…æ–‡æœ¬å†…å®¹
- `filterChar`: æ•æ„Ÿè¯æ›¿ä»£ç¬¦ï¼Œé»˜è®¤ä¸º`*`

## TODOs

- âœ… å¢åŠ å•å…ƒæµ‹è¯•
- âœ… æ‰“åŒ…ä»£ç å‹ç¼©
- [ ] æ”¯æŒ CI
- âœ… å®Œå–„ readme æ–‡æ¡£
- [ ] æ€§èƒ½æµ‹è¯•
- âœ… æ”¯æŒé…ç½®å¹²æ‰°è¯: `setNoiseWords`
- âœ… æ”¯æŒå¯¹æ•æ„Ÿè¯è¿›è¡Œè¿‡æ»¤æ›¿ä»£ï¼š `filter`
- âœ… æ”¯æŒæ ¡éªŒæ–‡æœ¬ä¸­æ˜¯å¦æœ‰æ•æ„Ÿè¯ï¼š `verify`
